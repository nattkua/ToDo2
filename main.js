!function t(e,o,n){function i(d,s){if(!o[d]){if(!e[d]){var r="function"==typeof require&&require;if(!s&&r)return r(d,!0);if(a)return a(d,!0);var l=new Error("Cannot find module '"+d+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[d]={exports:{}};e[d][0].call(u.exports,function(t){var o=e[d][1][t];return i(o?o:t)},u,u.exports,t,e,o,n)}return o[d].exports}for(var a="function"==typeof require&&require,d=0;d<n.length;d++)i(n[d]);return i}({1:[function(t,e,o){function n(){this.todoListDIV=document.getElementById("todo-list"),this.newTodoBTN=document.getElementsByClassName("js-new-todo")[0],this.loadCompletedTodoBTN=document.getElementsByClassName("js-load-completed-todo")[0],this.todoPanel=null,this.todoData=null,this.todoList=[],this.todoLoaded=!1,this.completedTodoLoaded=!1,this.animationDelay=150}var i=t("./_todo-panel.js"),a=t("./_todo.js");n.prototype.init=function(){var t=this;t.request(),t.todoPanel=new i(t),t.todoPanel.init(),t.events()},n.prototype.request=function(){var t=this,e=0==t.completedTodoLoaded?"upcoming":"completed",o=new XMLHttpRequest;o.open("GET","?action="+e,!0),o.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);t.todoData=e,t.addTodo()}else console.log("server hit, request bad")},o.onerror=function(){console.log("connection error")},o.send(),t.completedTodoLoaded=!t.completedTodoLoaded},n.prototype.events=function(){var t=this;t.newTodoBTN.addEventListener("click",function(e){t.todoPanel.isActive===!1?t.todoPanel.open():t.todoPanel.close()}),t.loadCompletedTodoBTN.addEventListener("click",function(e){t.clearTodo(),t.completedTodoLoaded===!1?t.loadCompletedTodoBTN.innerHTML="Completed ToDos":t.loadCompletedTodoBTN.innerHTML="Upcoming ToDos"})},n.prototype.addTodo=function(){var t=this;t.todoData.reverse(),t.todoData.forEach(function(e){var o=new a(e,t);t.todoList.push(o),o.init(),t.todoListDIV.insertBefore(o.div,t.todoListDIV.firstChild),o["in"](t.animationDelay),t.animationDelay+=50}),t.todoLoaded=!0,t.animationDelay=50},n.prototype.clearTodo=function(){var t=this;t.todoList.reverse();for(var e=t.todoList.length-1;e>=0;e-=1){var o=t.todoList[e];o.out(t.animationDelay),t.animationDelay+=50}t.animationDelay=50},n.prototype.removeTodo=function(t,e){var o=this,e=e||o.animationDelay,n=o.todoList.filter(function(e){return e.id==t})[0],t=o.todoList.indexOf(n);setTimeout(function(){n.div.parentNode.removeChild(n.div),o.todoList.splice(t,1),0===o.todoList.length&&o.request()},e)},e.exports=n},{"./_todo-panel.js":2,"./_todo.js":3}],2:[function(t,e,o){function n(t){this.parent=t,this.section=document.getElementsByClassName("todo-panel")[0],this.form=document.getElementById("todo-panel-form"),this.titleInput=document.getElementById("todo-title"),this.dueMonthInput=document.getElementById("todo-due-month"),this.dueDayInput=document.getElementById("todo-due-day"),this.dueYearInput=document.getElementById("todo-due-year"),this.addBTN=document.getElementsByClassName("js-submit")[0],this.cancelBTN=document.getElementsByClassName("js-cancel")[0],this.errorMessage=this.section.querySelectorAll(".message")[0],this.isActive=!1}var i=t("./_todo.js");n.prototype.init=function(){var t=this;t.addBTN.addEventListener("click",function(e){e.preventDefault(),t.newTodo()}),t.cancelBTN.addEventListener("click",function(e){e.preventDefault(),t.close()}),t.titleInput.addEventListener("blur",function(e){t.titleInput.classList.remove("error"),t.errorMessage.classList.remove("active")})},n.prototype.open=function(){var t=this;t.setTodaysDate(),t.section.classList.add("active"),t.isActive=!0,t.section.setAttribute("aria-hidden",!1),t.section.setAttribute("aria-expanded",!0),t.form.focus()},n.prototype.close=function(){var t=this;t.section.classList.remove("active"),t.isActive=!1,t.form.reset(),t.setTodaysDate()},n.prototype.newTodo=function(){var t=this,e=encodeURIComponent(t.titleInput.value),o=String(t.dueYearInput.value+"-"+t.dueMonthInput.value+"-"+t.dueDayInput.value);if(t.validateTitleInput(e)===!0){var n=new XMLHttpRequest;n.open("GET","?action=create&title="+e+"&due_date="+o,!0),n.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);if(console.log(t.parent.todoData.lenght),t.parent.todoData.length>0){var o=new i(e,t.parent);t.parent.todoData.push(e),t.parent.todoList.push(o),o.init(),t.close(),t.parent.todoListDIV.insertBefore(o.div,t.parent.todoListDIV.firstChild),o["in"](t.parent.animationDelay)}else t.close()}else console.log("server hit, request bad")},n.onerror=function(){console.log("connection error")},n.send()}},n.prototype.editTodo=function(t){var e=this;e.titleInput.value=t.title;String(e.dueYearInput.value+"-"+e.dueMonthInput.value+"-"+e.dueDayInput.value);e.open(),console.log(t)},n.prototype.setTodaysDate=function(){var t=this,e=new Date,o=e.getMonth()+1,n=e.getDate(),i=e.getFullYear();10>o&&(o="0"+o),t.dueDayInput.value=10>n?"0"+n:n,t.dueMonthInput.value=o,t.dueYearInput.value=i,t.titleInput.classList.remove("error"),t.errorMessage.classList.remove("active")},n.prototype.validateTitleInput=function(t){var e=this;return""===e.titleInput.value?(e.titleInput.classList.add("error"),e.errorMessage.classList.add("active"),!1):!0},n.prototype.validateDateInput=function(t){var e=this;return""===e.titleInput.value?(e.titleInput.classList.add("error"),e.errorMessage.classList.add("active"),!1):!0},e.exports=n},{"./_todo.js":3}],3:[function(t,e,o){function n(t,e){this.parent=e,this.id=t.id,this.title=t.title,this.dueDate=t.due_date,this.overdue=t.overdue,this.complete=t.complete,this.div=null,this.deleteBTN=null,this.editBTN=null,this.primaryBTN=null}n.prototype.init=function(){var t=this;t.complete===!1&&t.isOverdue(),t.template(),t.events()},n.prototype.events=function(){var t=this;t.primaryBTN.addEventListener("click",function(e){t.complete===!1?t.done():t.reset()}),null!==t.deleteBTN&&t.deleteBTN.addEventListener("click",function(e){t["delete"]()}),null!==t.editBTN&&t.editBTN.addEventListener("click",function(e){t.edit()})},n.prototype["delete"]=function(){var t=this;t.update("delete"),t.out(300)},n.prototype.edit=function(){var t=this;t.parent.todoPanel.editTodo(t)},n.prototype.done=function(){var t=this;t.update("done"),t.out(300)},n.prototype.reset=function(){var t=this;t.update("reset"),t.out(300)},n.prototype.isOverdue=function(){var t=this,e=new Date,o=new Date(t.dueDate);e.getTime()>=o.getTime()&&t.update("overdue")},n.prototype.update=function(t){var e=this,o=new XMLHttpRequest;o.open("GET","?action="+t+"&id="+e.id,!0),o.onload=function(){if(this.status>=200&&this.status<400){JSON.parse(this.response)}else console.log("server hit, request bad")},o.onerror=function(){console.log("connection error")},o.send()},n.prototype["in"]=function(t){var e=this;setTimeout(function(){requestAnimationFrame(function(){e.div.classList.remove("js-todo-in")})},t)},n.prototype.out=function(t){var e=this;setTimeout(function(){requestAnimationFrame(function(){e.div.classList.add("js-todo-out"),e.parent.removeTodo(e.id,t)})},t)},n.prototype.template=function(){var t=this,e=["blue","green","pink","purple"],o=e[Math.floor(Math.random()*e.length)];t.div=document.createElement("div"),t.div.className=t.complete===!1?"todo js-todo-in "+o:"todo complete js-todo-in "+o,t.div.id=t.id,t.div.tabIndex=0;var n=document.createElement("div");n.className=t.overdue===!0&&t.complete===!1?"message message--urgent active":"message message--urgent";var i=document.createElement("p");i.innerHTML="This ToDo is OverDo!";var a=document.createElement("div");a.className="todo-info";var d=document.createElement("div");d.className="todo-button-group button-group";var s=document.createElement("div");s.className="todo-primary-action";var r=document.createElement("h2");r.innerHTML='Due: <span class="text">'+t.dueDate+"</span>",r.setAttribute("class","todo-info__title");var l=document.createElement("h3");l.innerHTML=t.title,l.setAttribute("class","todo-info__title"),t.complete===!1?(t.primaryBTN=document.createElement("button"),t.primaryBTN.innerHTML="Done",t.primaryBTN.className="button button--primary button--large js-todo-complete",t.editBTN=document.createElement("button"),t.editBTN.innerHTML="Edit",t.editBTN.className="button button--secondary js-todo-edit",t.deleteBTN=document.createElement("button"),t.deleteBTN.innerHTML="Delete",t.deleteBTN.className="button button--secondary js-todo-delete",d.appendChild(t.editBTN),d.appendChild(t.deleteBTN),s.appendChild(t.primaryBTN)):(t.primaryBTN=document.createElement("button"),t.primaryBTN.innerHTML="Undo",t.primaryBTN.className="button button--primary button--large js-todo-undo ",s.appendChild(t.primaryBTN)),n.appendChild(i),a.appendChild(r),a.appendChild(l),a.appendChild(d),t.div.appendChild(n),t.div.appendChild(a),t.div.appendChild(s)},e.exports=n},{}],4:[function(t,e,o){var n=t("./_app.js"),i=!1;document.onreadystatechange=function(){if(!i&&("interactive"===document.readyState||"complete"===document.readyState)){i=!0;var t=new n;t.init()}}},{"./_app.js":1}]},{},[4]);